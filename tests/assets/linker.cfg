# Linker configuration for cc65 (ld65)
# Defines memory layout and segment placement for 6502 programs

MEMORY {
    # RAM: 32KB from $0000-$7FFF
    # Used for zero page, stack, data, and code in this emulator config
    RAM: start = $0000, size=$8000, type = rw, fill = yes, fillval = $FF, file = %O;

    # ROM: Almost 32KB from $8000-$FFF9
    # Defined but not used in examples (code runs from RAM instead)
    ROM: start = $8000, size=$7FFA, type = ro, fill = yes, fillval = $FF, file = %O;

    # ROM_VECTORS: 6 bytes at $FFFA-$FFFF
    # Holds the three 16-bit interrupt vectors: NMI, RESET, IRQ
    ROM_VECTORS: start = $FFFA, size=6, type = ro, fill = yes, fillval = $FF, file = %O;
}

SEGMENTS {
    # Zero page ($00-$FF): Fast access variables
    ZEROPAGE: load=RAM, type=zp, define=yes;

    # BSS segment: Uninitialized data (not included in binary file)
    # Defined but takes no space in the binary
    BSS: load=RAM, type=bss, define=yes;

    # Data segment: Initialized data at $0200 (page 2)
    # Page 1 ($0100-$01FF) is reserved for the stack
    DATA: load=RAM, type=rw, define=yes, offset=$0200;

    # Code segment: Starts at $0400 (page 4)
    # Leaves room for zero page, stack, and data
    CODE: load=RAM, type=ro, define=yes, offset=$0400;

    # Interrupt vectors at top of memory
    VECTORS: load=ROM_VECTORS, type=ro;
}